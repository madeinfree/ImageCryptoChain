{"version":3,"sources":["james-sutton-FqaybX9ZiOU-unsplash.jpg","../node_modules/web3-eth-accounts/src sync","App.js","index.js"],"names":["module","exports","webpackEmptyContext","req","e","Error","code","keys","resolve","id","web3","JSONInterFace","App","React","useState","MD5","setMD5","imgSrc","setImgSrc","account","setAccount","validMessage","setValidMessage","isValid","useEffect","window","ethereum","Web3","enable","then","accounts","a","length","error","console","log","className","role","href","style","position","opacity","minWidth","height","alt","src","coverImage","icon","faUserLock","onDrop","file","reader","FileReader","onload","contents","target","result","crypto","toString","blobFile","Blob","objectURL","URL","createObjectURL","readAsBinaryString","getRootProps","getInputProps","zIndex","display","justifyContent","alignItems","cursor","margin","color","width","background","borderRadius","size","faUpload","Fragment","textAlign","onClick","md5","eth","Contract","methods","setImage","send","from","data","alert","err","handleDeployImageToChain","type","getImage","call","handleValidImage","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c929ff84.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/james-sutton-FqaybX9ZiOU-unsplash.4905e1cf.jpg\";","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 333;","import React from 'react'\nimport Dropzone from 'react-dropzone'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUpload, faUserLock } from '@fortawesome/free-solid-svg-icons'\nimport Typist from 'react-typist';\nimport './App.css'\nimport crypto from 'crypto-js'\nimport Web3 from 'web3'\nimport coverImage from './james-sutton-FqaybX9ZiOU-unsplash.jpg'\n\nlet web3\nconst JSONInterFace =\n  [{ \"constant\": false, \"inputs\": [{ \"internalType\": \"string\", \"name\": \"_md5\", \"type\": \"string\" }, { \"internalType\": \"string\", \"name\": \"_comment\", \"type\": \"string\" }], \"name\": \"setImage\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [{ \"internalType\": \"string\", \"name\": \"_md5\", \"type\": \"string\" }], \"name\": \"getImage\", \"outputs\": [{ \"internalType\": \"string\", \"name\": \"message\", \"type\": \"string\" }], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"constructor\" }]\n\nfunction handleDeployImageToChain(web3, account, md5) {\n  try {\n    const contract = new web3.eth.Contract(JSONInterFace, '0xe108b9e88dA1e0eEfaAb298aD98f5568a3001d5E');\n    contract.methods.setImage(md5, 'This image is protect by Image Contract Protector')\n      .send({\n        from: account\n      }).then(data => alert('Success'))\n  } catch (err) {\n    console.log(err)\n  }\n}\n\nfunction handleValidImage(web3, account, md5, setValidMessage) {\n  const contract = new web3.eth.Contract(JSONInterFace, '0xe108b9e88dA1e0eEfaAb298aD98f5568a3001d5E');\n  contract.methods.getImage(md5)\n    .call({\n      from: account\n    }).then(data => {\n      setValidMessage(data)\n    })\n}\n\nfunction App() {\n  const [MD5, setMD5] = React.useState('*')\n  const [imgSrc, setImgSrc] = React.useState('')\n  const [account, setAccount] = React.useState('')\n  const [validMessage, setValidMessage] = React.useState('')\n  const isValid = validMessage === 'You are the image owner.'\n  React.useEffect(() => {\n    if (window.ethereum) {\n      web3 = new Web3(window.ethereum);\n      try {\n        window.ethereum.enable().then(async accounts => {\n          if (accounts.length > 0) {\n            setAccount(accounts[0])\n          }\n        })\n      } catch (error) {\n        console.log(error)\n      }\n    }\n  }, [])\n  function onDrop(file) {\n    const reader = new FileReader()\n    reader.onload = function (e) {\n      var contents = e.target.result\n      setMD5(crypto.MD5(contents).toString())\n    }\n    const blobFile = new Blob(file)\n    const objectURL = URL.createObjectURL(blobFile);\n    setImgSrc(objectURL)\n    reader.readAsBinaryString(blobFile)\n  }\n  if (account === '') {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <div className=\"spinner-grow\" role=\"status\">\n            <span className=\"sr-only\">Loading...</span>\n          </div>\n          Please Connect <a href='https://metamask.io/'>MetaMask</a>\n        </header>\n      </div>\n    )\n  }\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <Typist>ContractAddressï¼š0xe108b9e88dA1e0eEfaAb298aD98f5568a3001d5E</Typist>\n        <img style={{ position: 'absolute', opacity: 0.4, minWidth: '100%', height: '100%' }} alt=\"cover image\" src={coverImage} />\n        {MD5 === '*' && <h1 style={{}}>Choose And Protect Your Image Now <FontAwesomeIcon icon={faUserLock} /></h1>}\n        {\n          MD5 === '*' ? (\n            <Dropzone onDrop={onDrop}>\n              {({ getRootProps, getInputProps }) => (\n                <div style={{ zIndex: 1, display: 'flex', justifyContent: 'center', alignItems: 'center', cursor: 'pointer', margin: '0 auto', color: 'black', width: 200, height: 200, background: 'white', borderRadius: 15 }} {...getRootProps()}>\n                  <input {...getInputProps()} />\n                  <FontAwesomeIcon size='5x' icon={faUpload} />\n                </div>\n              )}\n            </Dropzone>\n          ) : (\n              <React.Fragment>\n                <div className='container'>\n                  {\n                    validMessage !== '' && <div className={`alert ${isValid ? 'alert-success' : 'alert-danger'}`} role=\"alert\">\n                      <h4 className=\"alert-heading\">Valid Result</h4>\n                      <p>{isValid ? 'Congratulations ! ' : 'Oops ! '}{validMessage}</p>\n                      {!isValid && <hr />}\n                      {!isValid && <p className=\"mb-0\">Looks bad, do you forget to upload your image ?</p>}\n                    </div>\n                  }\n                  <div style={{ zIndex: 1, display: 'flex', justifyContent: 'center', alignItems: 'center' }} className='row'>\n                    <div className='col-6'>\n                      <h3>MD5: {MD5}</h3>\n                      <div>\n                        <img className='img-thumbnail' alt='' src={imgSrc} />\n                      </div>\n                    </div>\n                    <div style={{ textAlign: 'left' }} className='col-4'>\n                      <div>\n                        <button onClick={() => handleDeployImageToChain(web3, account, MD5)} type=\"button\" className=\"btn btn-outline-primary\">Protect to chain</button>\n                      </div>\n                      <div>\n                        <button onClick={() => handleValidImage(web3, account, MD5, setValidMessage)} type=\"button\" className=\"btn btn-outline-info\">Valid Image</button>\n                      </div>\n                      <div>\n                        <button onClick={() => {\n                          setMD5('*')\n                          setValidMessage('')\n                        }} type=\"button\" className=\"btn btn-outline-danger\">Remove</button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </React.Fragment>\n            )\n        }\n\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}